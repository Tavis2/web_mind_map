Программы на JavaScript могут быть вставлены в любое место HTML-документа с помощью тега `<script>`.

---
```html
<!DOCTYPE HTML>`
<html>

<body>
  <p>Перед скриптом...</p>
  <script>
    alert( 'Привет, мир!' );
  </script>
  <p>...После скрипта.</p>
</body>
</html>
```

---

# <script></script> как [[HTML]] тег

Тег `<script>` имеет несколько атрибутов, которые редко используются, но всё ещё могут встретиться в старом коде:
- ## type 
	Этот атрибут указывает тип представленного скрипта. Значение этого атрибута будет находиться в одной из следующих категорий:
	- ### **Атрибут не установлен (по-умолчанию, и сейчас так принято)**
		Пустая строка или установлен как MIME-тип JavaScript.
		Обозначает, что скрипт является "классическим скриптом", содержащим JavaScript-код. Рекомендуется не указывать MIME-тип, а пропускать атрибут вообще.
	- ### module
		Данное значение даёт браузеру инструкцию, что код является JavaScript-модулем. Обработка содержимого скрипта отложенная. Атрибуты `charset` и `defer`игнорируются
	- ### importmap
		Данное значение сигнализирует о том, что содержимое тега является словарём импортов. Словарь импортов - это JSON-объект, который может использоваться для задания алиасов при импорте
- ## async
	Это логический атрибут, указывающий браузеру, если возможно, загружать скрипт, указанный в атрибуте src, асинхронно.
	
> [!NOTE] Предупреждение
> `Атрибут async не будет оказывать никакого эффекта, если атрибут src отсутствует. Обычно браузеры загружают <script> синхронно, (т.е. async="false") во время разбора документа. Динамически вставленный <script> (используя, например, document.createElement) по умолчанию загружаются браузером асинхронно, поэтому для включения синхронной загрузки (т.е. когда скрипты загружаются в порядке их вставки) укажите async="false".`
- ## crossorigin
	Обычные элементы тега `script` передают мало информации в [[window.onerror]] для скриптов, которые не проходят проверку CORS. Чтобы разрешить ведение журнала ошибок сайта, которые используют отдельный домен для статических файлов (например, изображение, видео-файл, CSS-стили или Javascript-код), используйте атрибут `crossorigin`.
- ## defer
	Это логический атрибут, указывающий браузеру, что скрипт должен выполняться после разбора документа, но до события [[DOMContentLoaded]]. Скрипты с атрибутом `defer` будут предотвращать запуск события [[DOMContentLoaded]] до тех пор, пока скрипт не загрузится полностью и не завершится его инициализация.
	
> [!NOTE] Предупреждение
> `Предупреждение: Атрибут defer не будет оказывать никакого эффекта, если атрибут src отсутствует. Чтобы достигнуть такого же эффекта для динамически вставленных скриптов используйте async=false. Скрипты с атрибутом defer будут выполняться в том порядке, в котором они появились при разборе документа.`
- ## integrity
	Этот атрибут содержит встроенные метаданные, которые агент пользователя (браузер) может использовать для проверки того, что выбранный ресурс был доставлен без непредвиденных манипуляций.
- ## nomodule
	Булевый атрибут, который устанавливается для того, чтобы скрипт не выполнялся в браузерах, поддерживающих ES6-модули (англ.). Таким образом, может быть использован для предоставления резервных сценариев в старых браузерах, которые не поддерживают модульный код JavaScript.
- ## nonce
	Криптографический одноразовый номер (номер, используемый один раз) для внесения встроенных скриптов в белый список в [script-src Content-Security-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Content-Security-Policy/script-src).
	
	`nonce` (от _number used once_ — «одноразовое число») позволяет браузеру **разрешить выполнение только тех inline-скриптов, которым доверяет сервер**, и заблокировать все остальные.  **Это ключевая защита от XSS-атак (межсайтового скриптинга).**
- ## src 
	Определяет URI внешнего скрипта; является альтернативой встраиванию скрипта непосредственно в документ. 
	Атрибут принимает как и путь до файла с скриптом, так и URL-адресс.
	
	Подключение нескольких скриптов можно реализовать следующим образом:
> [!Note] Пример
> 	<script src="/js/script1.js"></script>
> 	<script src="/js/script2.js"></script>

> [!Note] На заметку:
> 	Как правило, только простейшие скрипты помещаются в HTML. Более сложные выделяются в отдельные файлы.  
> 	Польза отдельных файлов в том, что браузер загрузит скрипт отдельно и сможет хранить его в [кеше](https://en.wikipedia.org/wiki/Web_cache). 
> 	Другие страницы, которые подключают тот же скрипт, смогут брать его из кеша вместо повторной загрузки из сети. И таким образом файл будет загружаться с сервера только один раз.
> 	Это сокращает расход трафика и ускоряет загрузку страниц
	 	
> [!NOTE] Предупреждение
> 	Если у элемента `script` будет указан атрибут `src`, то он не должен иметь встроенный скрипт между тегами. Иначе внутреннее содержимое скрипта игнорируется

- ## text
	Как и атрибут `textContent`, этот атрибут задает текстовое содержимое элемента. Однако, в отличие от атрибута `textContent`, этот атрибут оценивается как исполняемый код после того, как узел вставлен в [[DOM]].
	
	### В чём суть именно тут
	- `textContent`  
		1. просто меняет текст узла  
	    2. **никогда не выполняется как код**
	- `script.text`  
	    1. задаёт **код** для `<script>`  
	    2. **выполняется в момент вставки `<script>` в [[DOM]]**
	
```js
const s = document.createElement('script');
s.text = "console.log('ещё не выполнено')";
document.body.appendChild(s); // ← здесь код выполняется
```
- ## Устаревшие атрибуты
	 - ### charset (Устарело)
		Если присутствует, его значение должно соответствовать "utf-8" без учета регистра ASCII. И в том, и в другом случае нет необходимости указывать атрибут charset, поскольку документы должны использовать UTF-8, а элемент script наследует свою кодировку символов от документа.
	- ### language (Устарело Не стандартно)
		Как и атрибут type, этот атрибут определяет используемый язык сценариев. Однако, в отличие от type, возможные значения language никогда не были стандартизированы. Вместо него следует использовать атрибут type.