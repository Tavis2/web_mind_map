Во время разработки мы можем проверить правильность работы функции, просто вызвав её, например, из консоли и сравнив полученный результат с ожидаемым.

***Однако, "ручная проверка" - не лучшее решение. При тестировании кода ручными перезапусками легко упустить что-нибудь важное.***

> Например, мы работаем над функцией `f`. Написали часть кода и решили протестировать. Выясняется, что `f(1)` работает правильно, в то время как `f(2)` -- нет. Мы вносим в код исправления, и теперь `f(2)` работает правильно. ***Вроде бы, всё хорошо, не так ли?*** Однако, мы забыли заново протестировать `f(1)`. Возможно, после внесения правок `f(1)` стала работать неправильно.

**Автоматическое тестирование означает, что тесты пишутся отдельно, в дополнение к коду. Они по-разному запускают наши функции и сравнивают результат с ожидаемым.**

# Пример базового тестирования в Node.js

`assert` — это встроенный модуль Node.js для проверки условий.
- сравнивает значения
- выбрасывает ошибку, если проверка не проходит
- ничего не требует устанавливать
## Минимальная структура проекта
```
project/
  math.js
  math.test.js
```
Основных два элемента
1. файл кода
2. файл теста
## Пример теста

Базовая функция сложения
```js
// math.js
function sum(a, b) {
  return a + b;
}

module.exports = { sum };
```

Тест для этой функции
```js
// math.test.js
const assert = require('assert');  
const { sum } = require('./math');  
  
// Проверки  
assert.strictEqual(sum(2, 3), 5);  
assert.strictEqual(sum(-1, 1), 0);  
assert.strictEqual(sum(0, 0), 0);  
  
console.log("Все тесты прошли");
```

Команда для проверки
``` bash
node math.test.js
```
## Основные виды проверки в assert

1.  **`strictEqual(a, b)`** *Строгое сравнение (`===`)*  
 Падает, если значения не полностью совпадают.
```js
assert.strictEqual(2 + 2, 4);
```

2.  **`notStrictEqual(a, b)`** *Строгое Неравенство* 
Проверяет, что значения **не равны** через `!==`.
```js
assert.strictEqual(2 + 2, 4);
```

3. **`deepStrictEqual(obj1, obj2)`** *Глубокое сравнение объектов и массивов* 
Глубоко сравнивает объекты и массивы (сравнивает содержимое, а не ссылку).
```js
assert.deepStrictEqual(  
{ name: "Ivan" },  
{ name: "Ivan" }  
);
```

4. **`notDeepStrictEqual(actual, expected)`** 
Проверяет, что объекты/массивы отличаются по содержимому.
```js
assert.notDeepStrictEqual(
  { a: 1 },
  { a: 2 }
);
```

5. `**ok(value)**`
Проверяет, что значение является **truthy**  
(не `false`, не `0`, не `null`, не `undefined`, не `""`, не `NaN`).
```js
assert.ok(true);
assert.ok(1);
assert.ok("text");
```
То же самое, что:
```js
assert(value);
```

6. **`fail(message)`**
Принудительно проваливает тест с указанным сообщением.
```js
assert.fail("Этот код не должен выполняться");
```

7. **`throws(fn, [error])`**
Проверяет, что функция выбрасывает ошибку.  
Можно дополнительно проверить тип ошибки.
```js
assert.throws(() => {
  throw new Error("Boom");
});
```
Можно проверять тип ошибки:
```js
assert.throws(
  () => { throw new TypeError("Wrong type"); },
  TypeError
);
```

8. **`doesNotThrow(fn)`**
Проверка, что функция НЕ выбрасывает ошибку
```js
assert.doesNotThrow(() => {
  JSON.parse('{"a":1}');
});
```

9. **`rejects(asyncFn)`** для async
Проверяет, что Promise отклоняется (async-функция завершится с ошибкой).
```js
await assert.rejects(async () => {
  throw new Error("Fail");
});
```

10. `doesNotReject`
Проверяет, что Promise успешно выполняется (без ошибки).
```js
await assert.doesNotReject(async () => {
  return 42;
});
```

## Как правильно писать тест (структура AAA)

Любой тест строится по схеме:
- **Arrange (подготовка)**
- **Act (действие)**
- **Assert (проверка)**
```js
const assert = require('assert');
const { sum } = require('./math');

// Arrange
const a = 2;
const b = 3;

// Act
const result = sum(a, b);

// Assert
assert.strictEqual(result, 5);
```
Пример с несколькими тестами *ручной вывод*
```js
const assert = require('assert');  
const { sum } = require('./math');  
  
function test(name, fn) {  
  try {  
    fn();  
    console.log(`✅ ${name}`);  
  } catch (error) {  
    console.error(`❌ ${name}`);  
    console.error(error.message);  
  }  
}  
  
test("Сложение положительных чисел", () => {  
  assert.strictEqual(sum(2, 3), 5);  
});  
  
test("Сложение отрицательных чисел", () => {  
  assert.strictEqual(sum(-2, -3), -5);  
});
```